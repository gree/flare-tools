
task :default => [:test]

tests = ["daemon", "stats", "cluster", "logger", "node", "cli", "util"]
envargs = "-u FLARE_INDEX_SERVER -u FLARE_INDEX_SERVER_PORT"

task :test do
  tests.each do |test|
    sh "env #{envargs} ruby #{test}_test.rb"
  end
end

task :stress do
  tests.each do |test|
    sh "env #{envargs} FLARE_TOOLS_STRESS_TEST=yes ruby #{test}_test.rb"
  end
end

task :clean do
 sh "rm -rf work/test*"
 sh "rm -f *~"
 sh "rm -f /tmp/flare[id].*.conf"
end

task :killall do
 sh "pkill /usr/local/bin/flarei"
 sh "pkill /usr/local/bin/flared"
end

